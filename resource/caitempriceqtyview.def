
product ZAB ERP

table caitempriceqtyview
  caption "Credit Limit View"
  columns zid,xitem,xrow,xqty,xqtydel,xbalance

  primary key zid,xitem,xrow

  foreign key
        zid references zbusiness.zid
  end foreign key

  sql create view caitempriceqtyview (zid,xitem,xrow,xqty,xqtydel,xbalance) ~
                  as select zid,xitem,xrow,xqty,~
                  isnull((select sum(xqtyord) from opdodetail where zid=caitemprice.zid and xitem=caitemprice.xitem and xpricerow=caitemprice.xrow),0),~
                  xqty-isnull((select sum(xqtyord) from opdodetail where zid=caitemprice.zid and xitem=caitemprice.xitem and xpricerow=caitemprice.xrow),0) ~
                  from caitemprice where xqty>0


end table
