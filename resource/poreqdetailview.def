product ZAB ERP

table poreqdetailview
  caption "poreqderail View"
  columns zid,xporeqnum,xadvnum,xrate,xlineamt,xadjustment
  primary key zid,xporeqnum,xporeqnum,xitem,xrate,xlineamt,xadjustment
   foreign key
        zid references zbusiness.zid
  end foreign key
  
  sql create view poreqdetailview(zid,xporeqnum,xadvnum,xordernum,xstaff,xrow,xitem,xdesc,xrate,xlineamt,xadjustment) ~
    as select a.zid,a.xporeqnum,a.xporeqnum,b.xordernum,b.xstaff,a.xrow,a.xitem,c.xdesc,a.xrate,SUM(a.xlineamt),SUM(a.xadjustment) from poreqdetail a ~
	join poreqheader b on a.zid=b.zid and a.xporeqnum=b.xporeqnum join caitem c on a.zid=c.zid and a.xitem=c.xitem where left(b.xporeqnum,4)='AD--' ~
	group by a.zid,a.xporeqnum,a.xporeqnum,b.xordernum,b.xstaff,a.xrow,a.xitem,c.xdesc,a.xrate
end table 
