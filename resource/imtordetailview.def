


product ZAB ERP

table imtordetailview
  caption "Requisition Detail View"
  columns zid,xtornum,xfwh,xdes1,xtwh,xdes2,xitem,xdesc,xqtyreq,xpsize,xqtyalc,xqtycom,xrow
  primary key zid,xtornum,xfwh,xdes1,xtwh,xdes2,xitem,xdesc,xqtyreq,xpsize,xqtyalc,xqtycom,xrow
  foreign key
        zid references zbusiness.zid
  end foreign key

  sql create view imtordetailview (zid,xtornum,xfwh,xdes1,xtwh,xdes2,xitem, ~
  xdesc,xqtyreq,xpsize,xqtyord,xqtyalc,xqtycom,xqtypor,xrow,xserial,xunit,xcfpur,xavail,xqty,xdate)~
	as select a.zid,a.xtornum,a.xfwh,b.xlong,a.xtwh,c.xlong,d.xitem,e.xdesc, ~
	d.xqtyreq,d.xpsize,d.xqtyord,d.xqtyalc,d.xqtycom,d.xqtypor,d.xrow,d.xserial,d.xunit,isnull(e.xcfpur,1),(f.xavail/isnull(e.xcfpur,1)),f.xavail,d.xdate from imtorheader a ~ 
	 join imtordetail d on a.zid=d.zid and a.xtornum=d.xtornum ~ 
	 join caitem e on d.zid=e.zid and d.xitem=e.xitem ~
	 left join branchview b on a.zid=b.zid and a.xfwh=b.xcode ~
	 left join branchview c on a.zid=c.zid and a.xtwh=c.xcode ~ 
	 left join imstock f on a.zid=f.zid and d.xitem=f.xitem and a.xfwh=f.xwh

end table
