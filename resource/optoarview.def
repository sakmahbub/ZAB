product ZAB ERP

table optoarview
  caption "AR TO GL View"
  columns zid,xdornum,xgitem,xdate,xlineamt

  primary key zid,xdornum

  foreign key
    zid references zbusiness.zid
  end foreign key

  sql create view optoarview (zid,xdornum,xgitem,xdate,xlineamt) ~
                  as select a.zid,a.xdornum,~
                  (select xgitem from caitem where a.xitem=caitem.xitem and a.zid=caitem.zid),~
                  b.xdate,a.xlineamt ~
                  from opdodetail a join opdoheader b on a.zid=b.zid and a.xdornum=b.xdornum ~
                  union all ~
                  select a.zid,a.xcrnnum,~
                  (select xgitem from caitem where a.xitem=caitem.xitem and a.zid=caitem.zid),~
                  b.xdate,a.xlineamt ~
                  from opcrndetail a join opcrnheader b on a.zid=b.zid and a.xcrnnum=b.xcrnnum

end table
