


product ZAB ERP

table poview
  caption "PO View"
  columns zid,xpornum,xdate,xtype,xporeqnum,xtornum,xwh,xlong,xregi,xorg
  primary zid,xpornum,xdate,xtype,xporeqnum,xtornum,xwh,xlong,xregi,xorg
  foreign key
        zid references zbusiness.zid
  end foreign key

  sql create view poview (zid,xpornum,xdate,xtype,xporeqnum,xtornum,xwh,xlong,xregi,xpreparer,xorg,xproject,xdesc,xsrnum)~
                  as select a.zid,a.xpornum,a.xdate,a.xtype,a.xporeqnum,c.xtornum,a.xwh,d.xlong,b.xregi,a.xpreparer, ~
				    e.xorg,isnull(a.xproject,''),isnull(f.xlong,''),c.xsrnum from  poordheader a ~
					left join poreqheader b on a.zid=b.zid and a.xporeqnum=b.xporeqnum ~
					left join imtorheader c on b.zid=c.zid and b.xtornum=c.xtornum ~
					left join branchview d on a.zid=d.zid and a.xwh=d.xcode ~ 
					left join cacus e on a.zid=e.zid and a.xcus=e.xcus ~ 
					left join projectallview f on a.zid=f.zid and a.xproject=f.xcode ~ 
					where (a.xstatuspor='Open' or a.xstatuspor='Partially Received') and a.xstatus='Approved' and (a.xtype not in ('LC') or left(a.xpornum,2)='WO')
					
end table
