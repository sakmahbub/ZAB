product ZAB ERP

table sowisestock
  caption "SO Ref View"
  columns zid,xordernumso,xinvnum,xpornum,xcus,xname,xorderrow,xorderdate,xitem,xcolorcode,xbcolor,xqtyord,xqtydel,xrate,xqtyinv,xunit,xavail
  primary key zid,xordernumso
  foreign key
        zid references zbusiness.zid
  end foreign key

  sql create view sowisestock (zid,xordernumso,xordernum,xpornum,xcus,xname,xorderrow,xorderdate,xitem,xcolorcode,xbcolor,xqtyord,xqtydel,xrate,xqtyinv,xunit,xavail)~
	as select a.zid,b.xordernum,b.xinvnum,b.xpornum,b.xcus,c.xorg,a.xorderrow,b.xorderdate,a.xitem,a.xcolorcode,a.xbcolor,a.xqtyord,a.xqtydel,a.xrate,a.xqtyinv,a.xunitsel, ~
	isnull((select sum(xqty*xsign) from imtrn where imtrn.zid=a.zid and imtrn.xitem=a.xitem and imtrn.xcolorcode=a.xcolorcode  and imtrn.xwh='03' ),0)~//and imtrn.xordernumso=a.xordernum
                  from oporddetailso a ~
				  join opordheaderso b on a.zid=b.zid and a.xordernum=b.xordernum ~
				  join cacus c on a.zid=b.zid and c.xcus=b.xcus 
				  
				  
				  //gro=up by a.zid,b.xinvnum,b.xcus,c.xorg,a.xitem,a.xcolorcode,a.xbcolor
				  
end table
