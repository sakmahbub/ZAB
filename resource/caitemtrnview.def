


product ZAB ERP

table caitemtrnview
  caption "Requisition Detail View"
  columns zid,xtornum,xwh,xitem,xdesc,xtheircode,xunit,xqty,xrate,xlineamt,xdocnum,xtype,xtypetrn
  primary key zid
  foreign key
        zid references zbusiness.zid
  end foreign key

  sql create view caitemtrnview (zid,xusers,xdate,xtornum,xwh,xitem,xdesc,xtheircode,xunit,xqty,xrate,xlineamt,xdocnum,xtype,xtypetrn)~
	as Select a.zid,a.zauserid,h.xdate,a.xtornum,'',a.xitem,c.xdesc,c.xtheircode,a.xunit,CASE WHEN isnull(a.xqtyreq,0)=0 THEN isnull(a.xqtyord,0) else isnull(a.xqtyreq,0) end, ~
isnull(a.xrate,0),isnull(a.xlineamt,0),'', 'Reqitsition','' from imtordetail a join caitem c on a.zid=c.zid and a.xitem=c.xitem ~
join imtorheader h on a.zid=h.zid and a.xtornum=h.xtornum ~
union all ~
Select a.zid,a.zauserid,a.xdate,a.ximtrnnum,xwh,a.xitem,c.xdesc,c.xtheircode,a.xunit,isnull(a.xqty,0), ~
isnull(a.xrate,0),isnull(a.xval,0),xdocnum,'Inventory',CASE WHEN xsign>0 THEN 'Receive' else 'Issue' end ~ 
from imtrn a join caitem c on a.zid=c.zid and a.xitem=c.xitem ~
union all ~
Select a.zid,a.zauserid,h.xdate,a.xpornum,'',a.xitem,c.xdesc,c.xtheircode,a.xunitpur,xqtypur, ~
isnull(a.xrate,0),isnull(a.xlineamt,0),'', 'Puchease','' from poorddetail a join caitem c on a.zid=c.zid and a.xitem=c.xitem ~
join poordheader h on a.zid=h.zid and a.xpornum=h.xpornum ~
union all ~
Select a.zid,a.zauserid,h.xdate,a.xgrnnum,'',a.xitem,c.xdesc,c.xtheircode,a.xunitpur,xqtygrn, ~
isnull(a.xrate,0),isnull(a.xlineamt,0),a.xpornum, 'GRN','' from pogrndetail a join caitem c on a.zid=c.zid and a.xitem=c.xitem ~
join pogrnheader h on a.zid=h.zid and a.xgrnnum=h.xgrnnum ~
union all ~
Select a.zid,a.zauserid,h.xdate,a.xporeqnum,'',a.xitem,c.xdesc,c.xtheircode,a.xunitpur,xqtyreq, ~
isnull(a.xrate,0),isnull(a.xlineamt,0),'', 'PR','' from poreqdetail a join caitem c on a.zid=c.zid and a.xitem=c.xitem ~
join poreqheader h on a.zid=h.zid and a.xporeqnum=h.xporeqnum

end table
