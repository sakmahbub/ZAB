product ZAB ERP

table opcrndetailview
  caption "AR Report View"
  columns zid,xcrnnum,xdate,xcus,xstatuscrn,xref,xwh,xdesc,xstatusar,xtotamt,~
          xdisc,xdiscf,xait,xamount,xsp,xtotvat,xaitamt,xdiscamt,xfm,xsm,xrsm,~
          xrow,xitem,xlong,xvatrate,xvatamt,~
          xqtyord,xqtybonus,xunit,xrate,xlineamt,xordernum,xgitem


  primary key zid,xvoucher

  foreign key
        zid references zbusiness.zid
  end foreign key

  sql create view opcrndetailview(zid,xcrnnum,xdate,xcus,xstatuscrn,xref,xwh,xdesc,xstatusar,xtotamt,~
                                 xdisc,xdiscf,xait,xamount,xsp,xtotvat,xaitamt,xdiscamt,xfm,xsm,xrsm,~
                                 xrow,xitem,xlong,xvatrate,xvatamt,~
                                 xqtyord,xqtybonus,xunit,xrate,xlineamt,xordernum,xgitem) ~
                                 as select a.zid,a.xcrnnum,a.xdate,a.xcus,a.xstatuscrn,a.xref,a.xwh,~
                                 (select xlong from xcodes where xtype='Branch' and zid=a.zid and xcode=a.xwh),~
                                 a.xstatusar,a.xtotamt,~
                                 a.xdisc,a.xdiscf,a.xait,a.xamount,a.xsp,a.xvatamt,a.xaitamt,a.xdiscamt,a.xfm,a.xsm,a.xrsm,~
                                 b.xrow,b.xitem,b.xlong,b.xvatrate,b.xvatamt,b.xqtyord,b.xqtybonus,b.xunit,b.xrate,b.xlineamt,a.xordernum,~
				 (select xgitem from caitem where zid=b.zid and xitem=b.xitem) ~
                                 from opcrnheader a join opcrndetail b on a.zid=b.zid and a.xcrnnum=b.xcrnnum


end table
