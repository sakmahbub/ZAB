

product ZAB ERP

table opfabriccolorview
  caption "PI Ref View"
  columns zid,xpiref,xdate,xrow
  primary key zid,xpiref
  foreign key
        zid references zbusiness.zid
  end foreign key

  sql create view opfabriccolorview (zid,xordernum,xpiref,xpidate,xcus,xorg,xitem,xdesc,xconstruction,xfabrictype,xfabriccolor,xprcstype)~
                  as select a.zid,a.xordernum,a.xpiref,a.xpidate,a.xcus,cus.xorg,b.xitem,c.xdesc,b.xconstruction,b.xfabrictype,b.xfabriccolor,b.xprcstype ~
                  from opordheader a join oporddetail b on a.zid=b.zid and a.xordernum=b.xordernum ~
				  join cacus cus on a.zid=cus.zid and cus.xcus=a.xcus ~
				  join caitem c on b.zid=c.zid and c.xitem=b.xitem ~
				  union all ~
				  select a.zid,a.xordernum,a.xpiref,a.xpidate,a.xcus,cus.xorg,b.xitem,c.xdesc,b.xconstruction,b.xfabrictype,'Grey Fabric',b.xprcstype ~
                  from opordheader a join oporddetail b on a.zid=b.zid and a.xordernum=b.xordernum ~
				  join cacus cus on a.zid=cus.zid and cus.xcus=a.xcus ~
				  join caitem c on b.zid=c.zid and c.xitem=b.xitem 

//  sql create view opfabriccolorview (zid,xordernum,xpiref,xpidate,xcus,xorg,xitem,xdesc,xconstruction,xfabrictype,xfabriccolor)~
//                  as select a.zid,a.xordernum,a.xpiref,a.xpidate,a.xcus,cus.xorg,b.xitem,c.xdesc,b.xconstruction,b.xfabrictype,b.xfabriccolor ~
//                  from opordheader a join oporddetail b on a.zid=b.zid and a.xordernum=b.xordernum ~
//				  join cacus cus on a.zid=cus.zid and cus.xcus=a.xcus ~
//				  join caitem c on b.zid=c.zid and c.xitem=b.xitem ~
//				  union all ~
//				  select a.zid,a.xordernum,a.xpiref,a.xpidate,a.xcus,cus.xorg,b.xitem,c.xdesc,b.xconstruction,b.xfabrictype,'Grey Fabric' ~
//                  from opordheader a join oporddetail b on a.zid=b.zid and a.xordernum=b.xordernum ~
//				  join cacus cus on a.zid=cus.zid and cus.xcus=a.xcus ~
//				  join caitem c on b.zid=c.zid and c.xitem=b.xitem 
//				  
//				  
end table
