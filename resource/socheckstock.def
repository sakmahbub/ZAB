
product ZAB ERP

table socheckstock
  caption "so wise stock"
  columns zid,xordernumso,xitem,xcolorcode,xavail,xqtydel
  primary key zid,xordernumso,xitem,xcolorcode,xavail,xqtydel

  foreign key
        zid references zbusiness.zid
  end foreign key

  sql create view socheckstock (zid,xordernumso,xitem,xcolorcode,xavail,xqtydel) ~
            as SELECT imtrn.zid,imtrn.xordernumso,imtrn.xitem,imtrn.xcolorcode,sum(imtrn.xqty*imtrn.xsign),~ 
		(select isnull(sum(isnull(opdodetail.xqtydel,0)),0) from opdodetail where opdodetail.zid=imtrn.zid and opdodetail.xitem=imtrn.xitem and opdodetail.xcolorcode=imtrn.xcolorcode and opdodetail.xstatus='Booked')~//and opdodetail.xordernumso=imtrn.xordernumso
		from imtrn where imtrn.xwh='03' group by imtrn.zid,imtrn.xordernumso,imtrn.xitem,imtrn.xcolorcode
end table

