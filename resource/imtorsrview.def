product ZAB ERP

table imtorsrview
  caption "Inventory SR View"

  columns zid,xcus,xorg,xrsm,xfm,xppo,xregion,xfield,xterritory,xmarket,xrate

  foreign key
        zid references zbusiness.zid
  end foreign key

  sql create view imtorsrview(zid,xtornum,xsrnum,xfwh,xlong,xpreparer,xname,xstatustor,xrow,xitem,xdesc, ~
				xtheircode,xtitem,xqtyreq,xqtycom,xqtyalc,xqtypor,xqty,xunit) ~
                as Select a.zid,a.xtornum,a.xtornum,a.xfwh,e.xlong,a.xpreparer,d.xname,a.xstatustor,b.xrow,b.xitem,c.xdesc, ~
				c.xtheircode,c.xtitem,b.xqtyreq,b.xqtycom,b.xqtyalc,b.xqtypor,(b.xqtyreq-b.xqtycom-b.xqtyalc-b.xqtypor),b.xunit from imtorheader a ~
				join imtordetail b on a.zid=b.zid and a.xtornum=b.xtornum ~
				join caitem c on b.zid=c.zid and b.xitem=c.xitem ~
				join pdmst d on a.zid=d.zid and a.xpreparer=d.xstaff ~
				join branchview e on a.zid=e.zid and a.xfwh=e.xcode ~
				WHERE xstatustor in ('Approved','Checked','Partial Issue') ~
				and left(a.xtornum,2)='SR' ~
				and (b.xqtyreq-b.xqtycom-b.xqtyalc-b.xqtypor)>0
			



end table
