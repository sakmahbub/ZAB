product ZAB

table mootherprocessview
  caption "Payment View"
  columns ztime,zutime,zauserid,zuuserid,zid

  primary key zid,xfm

  foreign key
        zid references zbusiness.zid
        //zid,xsm,xrsm references carsm.zid,xsm,xrsm
  end foreign key

  sql create view mootherprocessview(zid,xbatch,xrow,xmoprcs,xfabriccolor,xprcstype,xqty,xbalance,xqtycom,xstatusrec) ~
              as select a.zid,a.xbatch,a.xrow,a.xmoprcs,a.xfabriccolor,a.xprcstype,~
			  isnull((select sum(xbalance-isnull(xqtycom,0)) from moprocess where zid=a.zid and xbatch=a.xbatch and xreciperow=a.xrow),0), ~
			  isnull((select sum(xbalance) from moprocess where zid=a.zid and xbatch=a.xbatch and xreciperow=a.xrow),0), ~
			  isnull((select sum(isnull(xqtycom,0)) from moprocess where zid=a.zid and xbatch=a.xbatch and xreciperow=a.xrow),0),a.xstatusrec ~
			  from mohrecipesetting a 
end table
