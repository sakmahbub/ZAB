
product ZAB ERP

table pogrndetailview
  caption "GRN Detail View"
  columns zid,xgrnnum,xpornum,xlcno,xwh,xlong,xrow,xdocrow,xitem,xdesc,xqtygrn,xqtyinsp,xunit,xrate,xval

  primary key zid,xgrnnum,xpornum

  foreign key
        zid references zbusiness.zid
  end foreign key

  sql create view pogrndetailview (zid,xgrnnum,xpornum,xlcno,xstatusgrn,xtype,xwh,xlong,xrow,xdocrow, ~
			xitem,xdesc,xqtygrn,xqtyinsp,xqtyprn,xunit,xrate,xval) ~
    as Select a.zid,a.xgrnnum,a.xpornum,a.xlcno,a.xstatusgrn,a.xtype,a.xwh,b.xlong,d.xrow, ~
	d.xdocrow,d.xitem,c.xdesc,(d.xqtygrn*isnull(c.xcfpur,1)),isnull(xqtyinsp,0),isnull((isnull(xqtyprn,0)*isnull(c.xcfpur,1)),0),c.xunit,i.xrate,i.xval ~
	from pogrnheader a ~
	join pogrndetail d on a.zid=d.zid and a.xgrnnum=d.xgrnnum ~
	left join branchview b on a.zid=b.zid and a.xwh=b.xcode ~
	join caitem c on d.zid=c.zid and d.xitem=c.xitem ~
	left join imtrn i on i.zid=d.zid and i.xdocnum=d.xgrnnum and i.xdocrow=d.xrow
end table
