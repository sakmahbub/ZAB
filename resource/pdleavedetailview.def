
product ZAB ERP

table pdleavedetailview
  caption "Leave View"
  columns zid,xyearperdate,xstaff,xname,xdesignation,xrow,~
          xdate,xtypeleave,xpaidleave,xyear,xper,xdatecom,xposition

  primary key zid,xyearperdate,xstaff,xtypeleave

  foreign key
        zid references zbusiness.zid
  end foreign key

  sql create view pdleavedetailview (zid,xyearperdate,xstaff,xname,xdesignation,~
          xrow,xdate,xtypeleave,xpaidleave,xyear,xper,xdatecom,xposition)~
                  as select a.zid,a.xyearperdate,a.xstaff,~
                  (select xname from pdmst where zid=a.zid and xstaff=a.xstaff),~
                  (select xdesignation from pdmst where zid=a.zid and xstaff=a.xstaff),~
                  a.xrow,a.xdate,a.xtypeleave,a.xpaidleave,a.xyear,a.xyear,b.xdate, ~
                  (select pdmst.xposition from pdmst where pdmst.zid=a.zid and pdmst.xstaff=a.xstaff) ~
                  from pdleavedetail a join pdleaveheader b on a.zid=b.zid ~
                  and a.xyearperdate=b.xyearperdate and a.xstaff=b.xstaff
end table
